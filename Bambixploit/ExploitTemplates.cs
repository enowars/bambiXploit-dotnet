namespace Bambixploit
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    public static class ExploitTemplates
    {
        public static readonly string HttpTemplate = @"#!/usr/bin/env python3

import json
import requests
import sys

TARGET = sys.argv[1]

session = requests.Session()

'''
# Some CTFs publish information ('flag hints') which help you getting individual flags (e.g. the usernames of users that deposited flags).
# Bambi CTF / ENOWARS flag hints:
attack_info = json.loads(requests.get('https://bambi.enoflag.de/scoreboard/attack.json').text)
service_info = attack_info['services']['Pomelo']
team_info = service_info[TARGET]
for round in team_info:
    round_info = team_info[round]
    for flag_store in round_info:
        store_info = round_info[flag_store]
        for flag_info in store_info:
            exploit(flag_info) # flag_info will always be a string, which you might have to parse with json.loads
'''

foo = s.get(f'http://{TARGET}:8000/bar?x=5')
";

        public static readonly string BinaryTemplate = @"#!/usr/bin/env python3
import sys
import requests

TARGET = sys.argv[1]

# hic sunt dracones
";

        public static void PrintTemplate(ExploitTemplate template)
        {
            switch (template)
            {
            case ExploitTemplate.Http:
                Console.Write(HttpTemplate);
                break;
            /* case ExploitTemplate.Binary:
                Console.Write(BinaryTemplate);
                break; */
            default:
                throw new InvalidOperationException();
            }
        }
    }
}
